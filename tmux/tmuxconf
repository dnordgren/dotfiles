# Terminal configuration
set -s extended-keys off
set -as terminal-features 'xterm*:RGB'
set-option -g terminal-overrides "xterm*:RGB"

# Easy config reload
bind-key R source-file ~/.tmux.conf \; display-message "tmux.conf reloaded."

set-option -g default-terminal tmux-256color

# mouse behavior
set -g mouse on

bind-key space next-window
bind-key bspace previous-window

# use vim-like keys for splits and windows
bind-key v split-window -h -c "#{pane_current_path}"
bind-key s split-window -v -c "#{pane_current_path}"
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind-key q display-panes
bind-key c new-window
bind-key [ copy-mode

set-window-option -g display-panes-time 1500

# Highlight active pane
set -g pane-active-border-style bg=default,fg=green
set -g pane-border-style fg=grey

# Window notifications: bell-based unread detection
# Claude Code hooks send \a on Stop + PermissionRequest → flags inactive windows
# Flag clears when you visit the window
setw -g monitor-activity off
setw -g monitor-silence 0
setw -g monitor-bell on
set -g visual-bell off
set -g bell-action other      # flag bell in non-current windows only

# Status bar: dot on unread, no color change
setw -g window-status-format " #I:#W#{?window_bell_flag, ●,} "
setw -g window-status-current-format " #I:#W "
setw -g window-status-bell-style "default"
setw -g window-status-activity-style "default"

# Allow the arrow key to be used immediately after changing windows
set-option -g repeat-time 0

# Doom Emacs / editor improvements
set -sg escape-time 10
set -g focus-events on

# Scrollback and window management
set -g history-limit 50000
set -g renumber-windows on
set -g base-index 1
setw -g pane-base-index 1

# Bind 'prefix + =' to balance panes horizontally
bind = select-layout even-horizontal

# Bind 'prefix + -' to balance panes vertically
bind - select-layout even-vertical
